<%- include("./../partials/header.ejs") %>

<div class="content-container">

    <table>
        <tr>
            <th>Id</th><th>Name</th><th>Email</th><th>Role</th>
        </tr>
        <% for (const user of users) {%>
            <tr>
                <td><%= user.user_id %></td>
                <td><%= user.name %></td>
                <td><%= user.email %></td>
                <td>
                    <form method="post" action="/updateRole">
                        <input type="hidden" name="user_id" value="<%= user.user_id %>">
                        <select name="role" class="user_role" onchange="this.form.submit()">
                            <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>User</option>
                            <option value="agent" <%= user.role === 'agent' ? 'selected' : '' %>>Agent</option>
                        </select>
                    </form>
                </td>
            </tr>
        <% } %>
    </table>
</div>

<%- include("./../partials/footer.ejs") %>
